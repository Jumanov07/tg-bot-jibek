require("dotenv").config();
const { Telegraf } = require("telegraf");

// Инициализация бота с токеном из переменной окружения
const bot = new Telegraf(process.env.TOKEN);

// 🎯 Список категорий с текстами
const categories = {
  "Өзүңдү өнүктүрүү": [
    "30 мүнөт ой жүгүртүү (медитация)",
    "Өзүңө кат жаз",
    "Бир жаңы макаланы же китептин бөлүмүн оку",
    "5 жылдык келечекке максат жаз",
    "Бир күн телефонсуз өткөр",
    "3 саат социалдык тармаксыз бол",
    "Чет тилинде 10 жаңы сөз жатта",
    "Жашооңдо эмнеге ыраазы экениңди жаз",
    "Тааныш эмес адам менен сүйлөш",
    "Күндөлүккө жашооң тууралуу 1 бет жаз",
  ],
  Чыгармачылык: [
    "10 мүнөт эч токтобой эркин жазуу жаса",
    "1 сүрөт тарт",
    "Жаңы ырдын текстин жаз",
    "Кол менен бир нерсе жасоого аракет кыл (handmade)",
    "Сүйүктүү тасмаңдын сюжети боюнча башкача бүтүрүп жаз",
    "Көздөрүңдү жуумп 5 мүнөт ырдап көр",
    "Бир күн бою сүрөттөр менен эле айтып берүү (телефон аркылуу)",
    "Жаңы тамак жасап көр",
    "Фотосессия кыл",
    "Окуган китебиңден кызыктуу цитаталарды бөлүш",
  ],
  "Физикалык өнүгүү": [
    "10 мүнөт йога жаса",
    "5 км бас",
    "Муздак суу менен жуун",
    "Бир күн таттуу жебей көр",
    "50 жолу отуруп-тур",
    "Бир күн бою 2 литр суу ич",
    "Жаңы машыгуу аракет кыл",
    "Бир күн бою басып жүр",
    "Үйдө 15 мүнөт бийле",
    "Денеңди сундуруу көнүгүүлөрүн жаса",
  ],
  "Жашоо стили жана көндүмдөр": [
    "Бир күн эрте ойгон",
    "Жаңы рецепт менен тамак жаса",
    "Өзүң каалаган кийим стилинде кийин",
    "Бир күн бою соцтармактарсыз бол",
    "1 саат эч ким менен сүйлөшпөй көр",
    "Бир жумага пландарды жаз",
    "Күн тартибиңди өзгөртүп көр",
    "Бир күн бою жаңы нерселерди байкоого аракет кыл",
    "Тазалык күнүн өткөр",
    "Күндүн акырында өзүңө отчет жаз",
  ],
  "Сырткы дүйнө менен байланыш": [
    "Жакын адамыңа күтүлбөгөн белек бер",
    "Көптөн бери сүйлөшпөгөн таанышыңа кат жаз",
    "Көршүң же үй-бүлөң үчүн бир жакшы иш жаса",
    "Бейтааныш адамга жардам бер",
    "Сүйүктүү инсанга ыраазычылык кат жаз",
    "Көңүлү чөккөн адамды колдоо",
    "1 күн бою комплимент айтууга аракет кыл",
    "Соцтармактарда 1 пайдалуу ой бөлүш",
    "Жаңы коомдук иш-чарага катыш",
    "Блогуңда чынчыл пост жаз",
  ],
  "Жаңы көндүмдөр": [
    "Бир жаңы тилден бир сүйлөм жатта",
    "Сол кол менен жазып көр",
    "Жаңы музыкалык инструмент аракет кыл",
    "Бир күнүңдү башка тилде өткөр",
    "YouTube аркылуу жаңы нерсе үйрөн",
    "Башкалар билбеген кызыктуу факттарды изде",
    "Чет өлкөлүк достор менен сүйлөш",
    "Бир жаңы программа же технология үйрөн",
    "Кол жазма стилиңди өзгөртүп көр",
    "Жаңы шыгын ачууга аракет кыл",
  ],
  "Саякат жана ачык абада": [
    "Жаңы жерге барып көр",
    "Көчөдө 1 саат отуруп, адамдарды байка",
    "Ачык абада тамактан",
    "Күндүн батышын же чыгышын карап тур",
    "Шаардагы кызыктуу жерлерди изилде",
    "Суу жээгине барып эс ал",
    "Бир күн бою транспорт колдонбой жүр",
    "Табиятка барып, 1 саат тынчтыкта эс ал",
    "Токойдо же паркта китеп оку",
    "Жаңы тамак жеп көр",
  ],
  "Акча жана финансы": [
    "Бир күндө канча акча коротконуңду жаз",
    "Акча үнөмдөөнүн жаңы жолун изде",
    "Бир күн бою эч нерсе сатып алба",
    "Кирешеңди көбөйтүү жолдорун ойлон",
    "Бир кичинекей инвестиция кылып көр",
    "Бир буюмуңду сатып же алмаштырып көр",
    "Финансылык план түз",
    "Бир жума бою акчаны туура пайдалан",
    "Бай адамдардын адаттарын изилде",
    "Бир күн бою 100 сом менен жашап көр",
  ],
  "Жашоого болгон көз караш": [
    "Бир күн бою позитивдүү ойлор менен жүр",
    "10 жыл мурдагы өзүңө кат жаз",
    "Келечектеги өзүңө кат жаз",
    "Бир күн бою ар бир кырдаалда жакшы жак изде",
    "Жашооңдогу эң сонун учурларды эске салган сүрөттөрдү кара",
    "Бир сөз менен бүгүнкү күнүңдү сүрөттө",
    "Кемчиликтериңди кабыл алуу үчүн бир нерсе жаса",
    "Бир күн бою баарын жаңы көз караш менен карап көр",
    "Сүйүктүү цитатаңды жазып, ал боюнча ой толго",
    "Күндү ыраазычылык менен бүтүр",
  ],
  "Тажрыйба жана эксперименттер": [
    "Бир күн бою башка адамдын ордуна өзүмдү коюп көр",
    "Бир күн бою жаңы эрежелер менен жашап көр",
    "Эң чоң коркунучуң менен күрөш",
    "Бир күн бою башка адамдай жүр",
    "Чоң аудиторияда бир нерсе айтып көр",
    "Бир күн бою үнүңдү катуураак же жайыраак чыгарып сүйлө",
    "10 мүнөт көздөрүңдү жуумп, башкаларды угуп көр",
    "Жаңы адам менен сүйлөш",
    "Бир адатыңды өзгөртүүгө аракет кыл",
    "Күтүлбөгөн бир иш жаса",
  ],
};

// 🚀 Стартовая команда
bot.start((ctx) => {
  const keyboard = {
    reply_markup: {
      keyboard: Object.keys(categories).map((cat) => [cat]),
      resize_keyboard: true,
    },
  };
  ctx.reply("👋 Салам! Категорияны танда:", keyboard);
});

// 🎲 Обработка выбора категории
bot.on("text", (ctx) => {
  const category = ctx.message.text;
  if (categories[category]) {
    const randomText =
      categories[category][
        Math.floor(Math.random() * categories[category].length)
      ];
    ctx.reply(`📌 ${category} категориясынан тапшырма:\n\n${randomText}`);
  } else {
    ctx.reply("⚠️ Сураныч, категорияны тандаңыз.");
  }
});

// 🌐 Веб-сервер үчүн
const express = require("express");
const app = express();
const PORT = process.env.PORT || 3000;

app.get("/", (req, res) => {
  res.send("Телеграм бот иштеп жатат! 🚀");
});

app.listen(PORT, () => {
  console.log(`🌐 Веб-сервер иштеп жатат: http://localhost:${PORT}`);
});

// 🔄 Запуск бота
bot.launch();

console.log("🤖 Бот кыргыз тилинде иштеп жатат!");
